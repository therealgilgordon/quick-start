montageDefine("7a1ec3b","core/meta/object-property",{dependencies:["../core","../exception","./blueprint","../logger"],factory:function(t,e){"use strict";var n=t("../core").Montage,a=t("../exception").Exception;t("./blueprint").Blueprint;var r=t("./blueprint").Binder,i=t("../logger").logger("object-property");e.ObjectProperty=n.specialize({constructor:{value:function(){this.superForValue("constructor")()}},init:{serializable:!1,enumerable:!1,value:function(){return this}},apply:{value:function(t,e){if(!t.hasOwnProperty("blueprint")){var a;a=n.getInfoForObject(t),null!=a&&a.isInstance===!1&&(e===void 0?e=r.manager.blueprintForPrototype(a.objectName,a.moduleId):(e.prototypeName!==a.objectName||e.moduleId!==a.moduleId)&&(e=null),this.applyWithBlueprint(t,e))}}},applyWithBlueprint:{value:function(t,e){null!=e&&(this.addProperties(t,e),null!==e.parent&&this.apply(Object.getPrototypeOf(t),e))}},addProperties:{value:function(t,e){for(var a,r=0;a=e.propertyBlueprints[r++];)a.isDerived?this.addDerivedProperty(t,a):a.isAssociation?this.addAssociation(t,a):this.addProperty(t,a);n.defineProperty(t,"_blueprint",{serializable:!1,enumerable:!1,value:e}),n.defineProperty(t,"blueprint",{enumerable:!1,serializable:!1,get:function(){return this._blueprint}}),n.defineProperty(t,"blueprintGet",{serializable:!1,enumerable:!1,value:this.blueprintGet}),n.defineProperty(t,"blueprintSet",{serializable:!1,enumerable:!1,value:this.blueprintSet})}},addProperty:{value:function(t,e){this.addPropertyStorage(t,e),this.addPropertyDefinition(t,e),this.addPropertyStoredValue(t,e)}},addPropertyStorage:{value:function(t,e){var a="_"+e.name,r=null;t.hasOwnProperty(a)?i.isError&&i.error("We have an issue here. The developer should not override the storage value for "+a+"."):(r=e.isToMany?{value:[],enumerable:!1,serializable:!0,distinct:!0}:{value:null,enumerable:!1,serializable:!0},n.defineProperty(t,a,r))}},addPropertyDefinition:{value:function(t,e){var a=e.name,r=null;t.hasOwnProperty(a)?i.isDebug&&i.debug("The developer has already created the property "+a+" method do nothing."):(r={get:function(){return this.blueprintGet(a)},enumerable:!0,serializable:!1},e.readOnly||(r.set=function(t){return this.blueprintSet(a,t)}),n.defineProperty(t,a,r))}},blueprintGet:{value:function(t){var e=this.blueprint.propertyBlueprintForName(t),n="_"+e.name;return this[n]},enumerable:!1,serializable:!1},blueprintSet:{value:function(t,e){var n=this.blueprint.propertyBlueprintForName(t),r="_"+n.name;if(null==e&&n.denyDelete)throw(new a).initWithMessageTargetAndMethod("Deny Delete",this,n.name);this[r]=e},enumerable:!1,serializable:!1},addPropertyStoredValue:{value:function(t,e){var a=e.name+"$Storage",r=null;t.hasOwnProperty(a)?i.isError&&i.error("We have an issue here. The developer should not override the stored value for "+a+"."):(r=e.isToMany?{value:[],enumerable:!1,serializable:!1,distinct:!0}:{value:null,enumerable:!1,serializable:!1},n.defineProperty(t,a,r))}},addAssociation:{value:function(t,e){this.addPropertyStorage(t,e),this.addAssociationDefinition(t,e),this.addPropertyStoredValue(t,e)}},addAssociationDefinition:{value:function(t,e){e.isToMany?this.addToManyAssociationDefinition(t,e):this.addToOneAssociationDefinition(t,e)}},addToOneAssociationDefinition:{value:function(t,e){var a=e.name.toCapitalized(),r="addTo"+a;t.hasOwnProperty(r)?i.isError&&i.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="removeFrom"+a,t.hasOwnProperty(r)?i.isError&&i.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="clear"+a,t.hasOwnProperty(r)?i.isError&&i.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}})}},addToManyAssociationDefinition:{value:function(t,e){var a=e.name.toCapitalized(),r="addTo"+a;t.hasOwnProperty(r)?i.isError&&i.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="removeFrom"+a,t.hasOwnProperty(r)?i.isError&&i.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="clear"+a,t.hasOwnProperty(r)?i.isError&&i.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}})}},addDerivedProperty:{value:function(){}}})}});