"use strict";var Montage=require("../core").Montage,Promise=require("../promise").Promise,ObjectProperty=require("./object-property").ObjectProperty,BinderModule=require("./binder"),logger=require("../logger").logger("blueprint"),BinderManager=exports.BinderManager=Montage.specialize({constructor:{value:function(){this._binders=[],this._binderTable={}}},_binders:{value:null},_binderTable:{value:null},binders:{get:function(){return this._binders}},addBinder:{value:function(t){if(null!==t){this._binderTable[t.name]&&this.removeBinder(this._binderTable[t.name]);var e=this._binders.indexOf(t);e>=0&&this._binders.splice(e,1),this._binders.push(t),this._binderTable[t.name]=t}}},removeBinder:{value:function(t){if(null!==t){var e=this._binders.indexOf(t);e>=0&&this._binders.splice(e,1),this._binderTable[t.name]&&delete this._binderTable[t.name]}}},binderForName:{value:function(t){return this._binderTable[t]}},blueprintForPrototype:{value:function(t,e){var n,a,i;for(i=0;(n=this.binders[i])!==void 0;i++)if(a=n.blueprintForPrototype(t,e),null!==a)return a;return null}},_defaultBlueprintObjectProperty:{serializable:!0,value:null},defaultBlueprintObjectProperty:{get:function(){return this._defaultBlueprintObjectProperty||(this._defaultBlueprintObjectProperty=(new ObjectProperty).init()),this._defaultBlueprintObjectProperty}},_defaultBinder:{serializable:!0,value:null},defaultBinder:{get:function(){return this._defaultBinder||(this._defaultBinder=(new BinderModule.Binder).initWithNameAndRequire("default",global.require),this._defaultBinder.isDefault=!0,this.addBinder(this._defaultBinder)),this._defaultBinder}}});